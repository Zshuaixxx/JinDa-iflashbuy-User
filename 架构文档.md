# 用户端项目架构文档

## 目录
- [用户端项目架构文档](#用户端项目架构文档)
  - [目录](#目录)
  - [一、项目概述](#一项目概述)
  - [二、目录结构](#二目录结构)
  - [三、技术栈](#三技术栈)
  - [四、实现功能](#四实现功能)
  - [五、核心模块设计](#五核心模块设计)
    - [1. 页面结构](#1-页面结构)
    - [2. 状态管理](#2-状态管理)
    - [3. API接口](#3-api接口)
  - [六、部署构建流程](#六部署构建流程)

## 一、项目概述
尽达闪购用户端是一个基于uni-app开发的微信小程序，提供在线点餐、订单管理、地址管理等功能，让用户能够便捷地进行外卖点餐和支付。

## 二、目录结构
```
JinDa-iflashbuy-User/
├── package.json
├── project.config.json
├── src/
│   ├── App.vue
│   ├── components/         # 公共组件
│   ├── design/             # 设计资源
│   ├── image/              # 图片资源
│   ├── main.ts
│   ├── manifest.json
│   ├── pages/              # 页面文件
│   │   ├── index/          # 首页
│   │   ├── order/          # 订单页
│   │   ├── details/        # 订单详情
│   │   ├── pay/            # 支付页面
│   │   ├── success/        # 提交成功
│   │   ├── nonet/          # 无网络
│   │   ├── address/        # 地址管理
│   │   ├── remark/         # 订单备注
│   │   ├── my/             # 个人中心
│   │   ├── addOrEditAddress/  # 新增/编辑地址
│   │   └── historyOrder/   # 历史订单
│   ├── pages.json          # 页面配置
│   ├── static/             # 静态资源
│   ├── store/              # 状态管理
│   │   └── index.ts
│   ├── styles/             # 样式文件
│   ├── uni.scss
│   └── utils/              # 工具函数
└── tsconfig.json
```

## 三、技术栈
- 前端框架：Vue 3.2.47
- 编程语言：TypeScript 5.1.6
- 构建工具：Vite 4.4.9
- 状态管理：Pinia 2.0.27
- 持久化存储：pinia-plugin-persistedstate
- 组件库：uni-ui 1.5.6
- 开发框架：uni-app 3.0.0-alpha
- 代码规范：ESLint 8.22.0, Prettier 2.7.1

## 四、实现功能
1. **首页**：展示商家信息和菜单
2. **订单管理**：创建订单、查看订单详情、历史订单
3. **支付功能**：订单支付
4. **地址管理**：新增、编辑、删除收货地址
5. **个人中心**：用户信息展示
6. **订单备注**：添加订单特殊要求

## 五、核心模块设计
### 1. 页面结构
- 首页 (pages/index/index)
- 订单页 (pages/order/index)
- 订单详情 (pages/details/index)
- 支付页面 (pages/pay/index)
- 提交成功 (pages/success/index)
- 无网络页面 (pages/nonet/index)
- 地址管理 (pages/address/address)
- 订单备注 (pages/remark/index)
- 个人中心 (pages/my/my)
- 新增/编辑地址 (pages/addOrEditAddress/addOrEditAddress)
- 历史订单 (pages/historyOrder/historyOrder)

### 2. 状态管理
使用Pinia进行状态管理，主要包含以下状态：
- storeInfo: 商店信息
- shopInfo: 店铺信息
- orderListData: 订单列表数据
- baseUserInfo: 用户基本信息
- lodding: 加载状态
- sessionId: 会话ID
- addressBackUrl: 地址返回URL
- dishTypeIndex: 菜品类型索引
- shopPhone: 店铺电话
- shopStatus: 店铺状态
- orderData: 订单数据
- token: 用户token
- arrivals: 预计到达时间
- remarkData: 备注数据
- addressData: 地址数据
- deliveryFee: 配送费
- gender: 性别

### 3. API接口
API请求通过utils/request.js封装，主要包含以下功能：
- 基础URL配置
- 请求头设置（包含token认证）
- GET/POST请求支持
- 响应处理和错误处理

## 六、部署构建流程
1. 开发环境：`npm run dev:mp-weixin`
2. 构建生产环境：`npm run build:mp-weixin`
3. 代码规范检查：`npm run lint`
4. TypeScript类型检查：`npm run tsc`

构建后的代码位于dist目录，可直接上传至微信开发者工具进行预览和发布。